<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Book a Chef - Payment</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">

<style>
    @font-face {
        font-family: 'milker';
        src: url('fonts/Milker.otf') format('opentype');
    }
    @font-face {
        font-family: 'lexend';
        src: url('fonts/Lexend-VariableFont_wght.ttf') format('truetype');
    }
    * {
        -webkit-tap-highlight-color: transparent;
    }

    body {
        position: relative;
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: "lexend", sans-serif;
        font-size: 14px;
        background-color: #0E0E0E;
        color: #F5F5F5;
        overflow-x: hidden;
    }

    body::before {
        content: "";
        position: fixed; 
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("—Slidesdocs—gleaming abstract in golden waves_203f90ae1c.jpg"); 
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        opacity: 0.2; 
        filter: brightness(75%); 
        z-index: -1;
        pointer-events: none;
    }

    header {
        position: fixed;
        top: 20px;
        left: 20px;
        right: 20px;
        padding: 15px 35px;
        display: flex;
        justify-content: space-between;
        align-items: center;

        background: rgba(30, 30, 30, 0.25);
        backdrop-filter: blur(20px) saturate(150%);
        -webkit-backdrop-filter: blur(20px) saturate(150%);
        
        box-shadow: 
            inset 0 0 10px rgba(255, 255, 255, 0.05),
            0 8px 32px rgba(0, 0, 0, 0.4),
            0 0 1px rgba(255, 255, 255, 0.1);
        
        border: 1px solid rgba(214, 196, 140, 0.15);
        border-radius: 50px;
        
        z-index: 100;
        transition: all 0.3s ease-in-out;
    }
    header:hover {
        background: rgba(40, 40, 40, 0.35);
        box-shadow: 
            inset 0 0 15px rgba(255, 255, 255, 0.1),
            0 12px 40px rgba(214, 196, 140, 0.5),
            0 0 2px rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(214, 196, 140, 0.25);
    }
    
    header h1 {
        font-family: "milker";
        color: #D6C48C;
        font-size: 28px;
        margin: 0;
        letter-spacing: 1px;
    }

    main {
        padding-top: 100px;
        padding-bottom: 40px;
        display: flex;
        justify-content: center;
    }

    .container {
        background: rgba(30,30,30,0.25);
        backdrop-filter: blur(20px) saturate(150%);
        border-radius: 30px;
        box-shadow: 
            inset 0 0 10px rgba(255,255,255,0.05),
            0 8px 32px rgba(0,0,0,0.4),
            0 0 1px rgba(255,255,255,0.1);
        padding: 25px 40px 40px 40px;
        width: 700px;
        max-width: 95%;
        display: flex;
        flex-direction: column;
        gap: 25px;
        border: 1px solid rgba(214,196,140,0.15);
        margin-top: 20px;
    }

    h2 {
        color: #D6C48C;
        margin-bottom: 10px;
        font-size: 18px;
        border-bottom: 1px solid rgba(214,196,140,0.3);
        padding-bottom: 5px;
    }

    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }

    .progress-bar {
        height: 6px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 4px;
        overflow: hidden;
        margin-top: 5px;
    }

    .progress-bar-fill {
        height: 100%;
        width: 80%;
        background: linear-gradient(90deg, #D6C48C, #e2c12d);
        border-radius: 4px;
    }

    .step-text {
        color: #A0A0A0;
        font-size: 12px;
        font-weight: 300;
    }

    .payment-methods {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-bottom: 20px;
    }

    .payment-option {
        display: flex;
        align-items: center;
        padding: 12px 20px;
        border-radius: 15px;
        background: rgba(255,255,255,0.05);
        border: 1px solid rgba(214,196,140,0.3);
        cursor: pointer;
        transition: 0.3s;
        font-size: 14px;
    }

    .payment-option input {
        margin-right: 15px;
        accent-color: #00FF00;
        outline: none;
        box-shadow: none;
    }

    .payment-option:hover {
        background: rgba(255,255,255,0.1);
    }

    .payment-option input:checked + span {
        color: #00FF00;
        font-weight: 600;
    }

    .price-summary-box {
        background: rgba(0, 0, 0, 0.449);
        backdrop-filter: blur(15px);
        border-radius: 15px;
        padding: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .price-row {
        display: flex;
        justify-content: space-between;
        padding: 6px 0;
        font-size: 14px;
        color: #A0A0A0;
    }

    .price-row.total {
        margin-top: 12px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding-top: 12px;
        font-size: 18px;
        font-weight: 600;
        color: #F5F5F5;
    }

    .price-value {
        font-weight: 700;
        color: #F5F5F5;
    }

    .price-row.total .price-value {
        color: #D6C48C;
    }

    .navigation-buttons {
        display: flex;
        justify-content: space-between;
        padding-top: 25px;
    }

    .nav-button {
        padding: 12px 25px;
        border-radius: 15px;
        font-family: "lexend", sans-serif;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s ease-in-out;
        font-weight: 500;
        text-decoration: none;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .nav-button.previous {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #F5F5F5;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        height: 35px;
    }

    .nav-button.previous:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    .nav-button.proceed {
        border: 1px solid rgba(68, 255, 0, 0.3);
        border-radius: 20px;
        background: rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(12px);
        color: rgb(43, 255, 0);
        font-size: 16px;
        padding: 12px 35px;
        cursor: pointer;
        box-shadow: 0 5px 25px rgba(73, 58, 12, 0.3);
        transition: all 0.3s ease-in-out;
    }

    .nav-button.proceed:hover {
        background: rgba(0, 0, 0, 0.25);
        box-shadow: 0 10px 35px rgba(0, 122, 0, 0.4);
        border: 1px solid rgba(27, 179, 0, 0.3);
    }

    .main-title{
        font-family: "milker";
    }
    @media (max-width: 600px) {
        .container{
            max-width: 70%;
            margin-top: 0px;
        }
    }
</style>
</head>
<body>

<header>
    <h1>CHEF HOME</h1>
</header>

<main>
    <div class="container">
        <div class="header-content">
            <div class="main-title">Payment</div>
            <div class="step-text">Step 4 of 5</div>
        </div>
        <div class="progress-bar">
            <div class="progress-bar-fill"></div>
        </div>

        <h2>Select Payment Method</h2>
        <form id="paymentForm">
            <div class="payment-methods">
                <label class="payment-option">
                    <input type="radio" name="payment" value="UPI" required>
                    <span>UPI</span>
                </label>
                <label class="payment-option">
                    <input type="radio" name="payment" value="COD">
                    <span>CASH ON DELIVERY</span>
                </label>
            </div>

            <h2>Price Summary</h2>
            <div class="price-summary-box">
                <div class="price-row">
                    <span>Chef Fee:</span>
                    <span class="price-value">₹<span id="chefFee">0</span></span>
                </div>
                <div class="price-row">
                    <span>Items Total:</span>
                    <span class="price-value">₹<span id="itemsTotal">0</span></span>
                </div>
                <div class="price-row total">
                    <span>Total:</span>
                    <span class="price-value">₹<span id="finalTotal">0</span></span>
                </div>
            </div>

            <div class="navigation-buttons">
                <a href="step3.html" class="nav-button previous">Back</a>
                <button type="submit" class="nav-button proceed">Pay Now</button>
            </div>
        </form>
    </div>
</main>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const orderData = JSON.parse(localStorage.getItem('orderData')) || {};

    const chefFee = Number(orderData.chefFee) || 399;
    const itemsTotal = Number(orderData.itemsTotal) || 0;
    const finalTotal = Number(orderData.finalTotal) || (chefFee + itemsTotal);

    document.getElementById('chefFee').textContent = chefFee;
    document.getElementById('itemsTotal').textContent = itemsTotal;
    document.getElementById('finalTotal').textContent = finalTotal;

    const paymentForm = document.getElementById('paymentForm');
    const payButton = paymentForm.querySelector('.nav-button.proceed');
    const paymentOptions = paymentForm.payment;

    // Update button text
    function updateButtonText() {
        if (paymentForm.payment.value === 'COD') {
            payButton.textContent = 'Confirm Order';
        } else {
            payButton.textContent = 'Pay Now';
        }
    }

    paymentOptions.forEach(option => {
        option.addEventListener('change', updateButtonText);
    });

    function showConfirmationTick() {
        const tickOverlay = document.createElement('div');
        tickOverlay.style.position = 'fixed';
        tickOverlay.style.top = 0;
        tickOverlay.style.left = 0;
        tickOverlay.style.width = '100%';
        tickOverlay.style.height = '100%';
        tickOverlay.style.background = 'rgba(0,0,0,0.6)';
        tickOverlay.style.display = 'flex';
        tickOverlay.style.flexDirection = 'column';
        tickOverlay.style.alignItems = 'center';
        tickOverlay.style.justifyContent = 'center';
        tickOverlay.style.zIndex = 9999;

        const tick = document.createElement('div');
        tick.innerHTML = '&#10004;';
        tick.style.fontSize = '100px';
        tick.style.color = '#00FF00';
        tick.style.textShadow = '0 0 20px #00FF00, 0 0 40px #00FF00, 0 0 60px #00FF00';
        tick.style.opacity = 0;
        tick.style.transform = 'scale(0.3)';
        tick.style.transition = 'all 0.6s ease-in-out';

        const text = document.createElement('div');
        text.textContent = 'Order Confirmed!';
        text.style.color = '#00FF00';
        text.style.fontSize = '28px';
        text.style.fontWeight = '600';
        text.style.textShadow = '0 0 10px #000000, 0 0 20px #000000';
        text.style.opacity = 0;
        text.style.transform = 'scale(0.5)';
        text.style.transition = 'all 0.6s ease-in-out';
        text.style.marginTop = '20px';

        tickOverlay.appendChild(tick);
        tickOverlay.appendChild(text);
        document.body.appendChild(tickOverlay);

        setTimeout(() => {
            tick.style.opacity = 1;
            tick.style.transform = 'scale(1)';
            text.style.opacity = 1;
            text.style.transform = 'scale(1)';
        }, 50);

        setTimeout(() => {
            tick.style.opacity = 0;
            tick.style.transform = 'scale(0.3)';
            text.style.opacity = 0;
            text.style.transform = 'scale(0.5)';
            setTimeout(() => {
                tickOverlay.remove();
                window.location.href = 'history.html';
            }, 600);
        }, 2000);
    }

    // Handle form submit
    paymentForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const paymentMethod = paymentForm.payment.value;

        const currentOrder = {
            chefFee: chefFee,
            itemsTotal: itemsTotal,
            finalTotal: finalTotal,
            paymentMethod: paymentMethod,
            date: new Date().toLocaleString()
        };

        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        orders.push(currentOrder);
        localStorage.setItem('orders', JSON.stringify(orders));

        if (paymentMethod === 'COD') {
            showConfirmationTick();
        } else {
            alert(`Payment of ₹${finalTotal} via ${paymentMethod} successful!`);
        }
    });

    updateButtonText();
});
</script>

</body>
</html>
